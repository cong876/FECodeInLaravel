!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=t.call(e,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function e(e){return"[object Function]"==q.call(e)}function t(e){return e instanceof Object}function n(t){var n,i;if("[object Object]"!==q.call(t))return!1;if(i=e(t.constructor)&&t.constructor.prototype,!i||!hasOwnProperty.call(i,"isPrototypeOf"))return!1;for(n in t);return n===m||hasOwnProperty.call(t,n)}function i(e){return e instanceof Array}function r(e){return"number"==typeof e.length}function o(e){return e.filter(function(e){return e!==m&&null!==e})}function a(e){return e.length>0?[].concat.apply([],e):e}function s(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(e){return e in C?C[e]:C[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function u(e,t){return"number"!=typeof t||S[s(e)]?t:t+"px"}function l(e){var t,n;return T[e]||(t=x.createElement(e),x.body.appendChild(t),n=E(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),T[e]=n),T[e]}function h(e,t){return t===m?v(e):v(e).filter(t)}function d(t,n,i,r){return e(n)?n.call(t,i,r):n}function f(e,t,n){var i=e%2?t:t.parentNode;i?i.insertBefore(n,e?1==e?i.firstChild:2==e?t:null:t.nextSibling):v(n).remove()}function p(e,t){t(e);for(var n in e.childNodes)p(e.childNodes[n],t)}var m,g,v,$,y,w,b=[],k=b.slice,x=window.document,T={},C={},E=x.defaultView.getComputedStyle,S={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,O=[1,3,8,9,11],P=["after","prepend","before","append"],D=x.createElement("table"),j=x.createElement("tr"),L={tr:x.createElement("tbody"),tbody:D,thead:D,tfoot:D,td:j,th:j,"*":x.createElement("div")},N=/complete|loaded|interactive/,A=/^\.([\w-]+)$/,M=/^#([\w-]+)$/,R=/^[\w-]+$/,q={}.toString,_={},F=x.createElement("div");return _.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=F).appendChild(e),i=~_.qsa(r,t).indexOf(e),o&&F.removeChild(e),i},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},w=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},_.fragment=function(e,t){t===m&&(t=I.test(e)&&RegExp.$1),t in L||(t="*");var n=L[t];return n.innerHTML=""+e,v.each(k.call(n.childNodes),function(){n.removeChild(this)})},_.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},_.isZ=function(e){return e instanceof _.Z},_.init=function(t,r){if(!t)return _.Z();if(e(t))return v(x).ready(t);if(_.isZ(t))return t;var a;if(i(t))a=o(t);else if(n(t))a=[v.extend({},t)],t=null;else if(O.indexOf(t.nodeType)>=0||t===window)a=[t],t=null;else if(I.test(t))a=_.fragment(t.trim(),RegExp.$1),t=null;else{if(r!==m)return v(r).find(t);a=_.qsa(x,t)}return _.Z(a,t)},v=function(e,t){return _.init(e,t)},v.extend=function(e){return k.call(arguments,1).forEach(function(t){for(g in t)t[g]!==m&&(e[g]=t[g])}),e},_.qsa=function(e,t){var n;return e===x&&M.test(t)?(n=e.getElementById(RegExp.$1))?[n]:b:1!==e.nodeType&&9!==e.nodeType?b:k.call(A.test(t)?e.getElementsByClassName(RegExp.$1):R.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},v.isFunction=e,v.isObject=t,v.isArray=i,v.isPlainObject=n,v.inArray=function(e,t,n){return b.indexOf.call(t,e,n)},v.trim=function(e){return e.trim()},v.uuid=0,v.map=function(e,t){var n,i,o,s=[];if(r(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&s.push(n);else for(o in e)n=t(e[o],o),null!=n&&s.push(n);return a(s)},v.each=function(e,t){var n,i;if(r(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},v.fn={forEach:b.forEach,reduce:b.reduce,push:b.push,indexOf:b.indexOf,concat:b.concat,map:function(e){return v.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return v(k.apply(this,arguments))},ready:function(e){return N.test(x.readyState)?e(v):x.addEventListener("DOMContentLoaded",function(){e(v)},!1),this},get:function(e){return e===m?k.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return v([].filter.call(this,function(t){return _.matches(t,e)}))},add:function(e,t){return v(w(this.concat(v(e,t))))},is:function(e){return this.length>0&&_.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==m)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):r(t)&&e(t.item)?k.call(t):v(t);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return v(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:v(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:v(e)},find:function(e){var t;return t=1==this.length?_.qsa(this[0],e):this.map(function(){return _.qsa(this,e)}),v(t)},closest:function(e,t){for(var n=this[0];n&&!_.matches(n,e);)n=n!==t&&n!==x&&n.parentNode;return v(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=v.map(n,function(e){return(e=e.parentNode)&&e!==x&&t.indexOf(e)<0?(t.push(e),e):void 0});return h(t,e)},parent:function(e){return h(w(this.pluck("parentNode")),e)},children:function(e){return h(this.map(function(){return k.call(this.children)}),e)},siblings:function(e){return h(this.map(function(e,t){return k.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==E(this,"").getPropertyValue("display")&&(this.style.display=l(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){v(this).wrapAll(v(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(v(this[0]).before(e=v(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){v(this).replaceWith(v(this).children())}),this},clone:function(){return v(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===m?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return v(this.pluck("previousElementSibling"))},next:function(){return v(this.pluck("nextElementSibling"))},html:function(e){return e===m?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;v(this).empty().append(d(this,e,t,n))})},text:function(e){return e===m?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var i;return"string"==typeof e&&n===m?0==this.length||1!==this[0].nodeType?m:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(e))&&e in this[0]?this[0][e]:i:this.each(function(i){if(1===this.nodeType)if(t(e))for(g in e)this.setAttribute(g,e[g]);else this.setAttribute(e,d(this,n,i,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===m?this[0]?this[0][e]:m:this.each(function(n){this[e]=d(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+s(e),t);return null!==n?n:m},val:function(e){return e===m?this.length>0?this[0].value:m:this.each(function(t){this.value=d(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===m&&"string"==typeof e)return 0==this.length?m:this[0].style[y(e)]||E(this[0],"").getPropertyValue(e);var n="";for(g in e)"string"==typeof e[g]&&""==e[g]?this.each(function(){this.style.removeProperty(s(g))}):n+=s(g)+":"+u(g,e[g])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(s(e))}):n=s(e)+":"+u(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(v(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return this.length<1?!1:c(e).test(this[0].className)},addClass:function(e){return this.each(function(t){$=[];var n=this.className,i=d(this,e,t,n);i.split(/\s+/g).forEach(function(e){v(this).hasClass(e)||$.push(e)},this),$.length&&(this.className+=(n?" ":"")+$.join(" "))})},removeClass:function(e){return this.each(function(t){return e===m?this.className="":($=this.className,d(this,e,t,$).split(/\s+/g).forEach(function(e){$=$.replace(c(e)," ")}),this.className=$.trim(),void 0)})},toggleClass:function(e,t){return this.each(function(n){var i=d(this,e,n,this.className);(t===m?!v(this).hasClass(i):t)?v(this).addClass(i):v(this).removeClass(i)})}},["width","height"].forEach(function(e){v.fn[e]=function(t){var n,i=e.replace(/./,function(e){return e[0].toUpperCase()});return t===m?this[0]==window?window["inner"+i]:this[0]==x?x.documentElement["offset"+i]:(n=this.offset())&&n[e]:this.each(function(n){var i=v(this);i.css(e,d(this,t,n,i[e]()))})}}),P.forEach(function(e,n){v.fn[e]=function(){var e=v.map(arguments,function(e){return t(e)?e:_.fragment(e)});if(e.length<1)return this;var i=this.length,r=i>1,o=2>n;return this.each(function(t,a){for(var s=0;s<e.length;s++){var c=e[o?e.length-s-1:s];p(c,function(e){null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&window.eval.call(window,e.innerHTML)}),r&&i-1>t&&(c=c.cloneNode(!0)),f(n,a,c)}})},v.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return v(t)[e](this),this}}),_.Z.prototype=v.fn,_.camelize=y,_.uniq=w,v.zepto=_,v}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=h++)}function n(e,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(l[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!o||t(e.fn)===t(o))&&(!a||e.sel==a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(t,n,i){e.isObject(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function a(n,r,a,s,c,u){u=!!u;var h=t(n),d=l[h]||(l[h]=[]);o(r,a,function(t,r){var o=c&&c(r,t),a=o||r,l=function(e){var t=a.apply(n,[e].concat(e.data));return t===!1&&e.preventDefault(),t},h=e.extend(i(t),{fn:r,proxy:l,sel:s,del:o,i:d.length});d.push(h),n.addEventListener(h.e,l,u)})}function s(e,i,r,a){var s=t(e);o(i||"",r,function(t,i){n(e,t,i,a).forEach(function(t){delete l[s][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function c(t){var n=e.extend({originalEvent:t},t);return e.each(m,function(e,i){n[e]=function(){return this[i]=f,t[e].apply(t,arguments)},n[i]=p}),n}function u(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var l=(e.zepto.qsa,{}),h=1,d={};d.click=d.mousedown=d.mouseup=d.mousemove="MouseEvents",e.event={add:a,remove:s},e.proxy=function(n,i){if(e.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=t(n),r}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){a(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){s(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){a(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return s(i,t,e),n}})})};var f=function(){return!0},p=function(){return!1},m={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){var r=!1;return("blur"==n||"focus"==n)&&(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:r=!0),this.each(function(o,s){a(s,n,i,t,function(n){return function(i){var r,o=e(i.target).closest(t,s).get(0);return o?(r=e.extend(c(i),{currentTarget:o,liveFired:s}),n.apply(o,[r].concat([].slice.call(arguments,1)))):void 0}},r)})},e.fn.undelegate=function(e,t,n){return this.each(function(){s(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return void 0==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return void 0==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),u(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var r,o;return this.each(function(a,s){r=c("string"==typeof t?e.Event(t):t),r.data=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(n){}return this}}),e.Event=function(e,t){var n=document.createEvent(d[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)\s+([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=s&&e.match(/TouchPad/),u=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[2]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),c&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),u&&(t.kindle=!0,t.version=u[1]),l&&(n.silk=!0,n.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function i(e){return r?r+e:n(e)}var r,o="",a={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},s=window.document,c=s.createElement("div"),u=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l={};e.each(a,function(e,i){return c.style[e+"TransitionProperty"]!==t?(o="-"+n(e)+"-",r=i,!1):void 0}),l[o+"transition-property"]=l[o+"transition-duration"]=l[o+"transition-timing-function"]=l[o+"animation-name"]=l[o+"animation-duration"]="",e.fx={off:r===t&&c.style.transitionProperty===t,cssPrefix:o,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(t,n,i,r){return e.isObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,i,r)},e.fn.anim=function(n,i,r,a){var s,c,h,d={},f=this,p=e.fx.transitionEnd;if(i===t&&(i=.4),e.fx.off&&(i=0),"string"==typeof n)d[o+"animation-name"]=n,d[o+"animation-duration"]=i+"s",p=e.fx.animationEnd;else{for(c in n)u.test(c)?(s||(s=[]),s.push(c+"("+n[c]+")")):d[c]=n[c];s&&(d[o+"transform"]=s.join(" ")),!e.fx.off&&"object"==typeof n&&(d[o+"transition-property"]=Object.keys(n).join(", "),d[o+"transition-duration"]=i+"s",d[o+"transition-timing-function"]=r||"linear")}return h=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(p,arguments.callee)}e(this).css(l),a&&a.call(this)},i>0&&this.bind(p,h),setTimeout(function(){f.css(d),0>=i&&setTimeout(function(){f.each(function(){h.call(this)})},0)},0),this},c=null}(Zepto),function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.defaultPrevented}function n(e,n,i,r){return e.global?t(n||$,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function o(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function a(e,t,i){var r=i.context,o="success";i.success.call(r,e,o,t),n(i,r,"ajaxSuccess",[t,i,e]),c(o,t,i)}function s(e,t,i,r){var o=r.context;r.error.call(o,i,t,e),n(r,o,"ajaxError",[i,r,e]),c(t,i,r)}function c(e,t,i){var o=i.context;i.complete.call(o,t,e),n(i,o,"ajaxComplete",[t,i]),r(i)}function u(){}function l(e){return e&&(e==x?"html":e==k?"json":w.test(e)?"script":b.test(e)&&"xml")||"text"}function h(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(t){v(t.data)&&(t.data=e.param(t.data)),t.data&&(!t.type||"GET"==t.type.toUpperCase())&&(t.url=h(t.url,t.data))}function f(t,n,i,r){var o=e.isArray(n);e.each(n,function(n,a){r&&(n=i?r:r+"["+(o?"":n)+"]"),!r&&o?t.add(a.name,a.value):(i?e.isArray(a):v(a))?f(t,a,i,n):t.add(n,a)})}var p,m,g=0,v=e.isObject,$=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,k="application/json",x="text/html",T=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var n,i="jsonp"+ ++g,r=$.createElement("script"),o=function(){e(r).remove(),i in window&&(window[i]=u),c("abort",s,t)},s={abort:o};return t.error&&(r.onerror=function(){s.abort(),t.error()}),window[i]=function(o){clearTimeout(n),e(r).remove(),delete window[i],a(o,s,t)},d(t),r.src=t.url.replace(/=\?/,"="+i),e("head").append(r),t.timeout>0&&(n=setTimeout(function(){s.abort(),c("timeout",s,t)},t.timeout)),s},e.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:k,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(t){var n=e.extend({},t||{});for(p in e.ajaxSettings)void 0===n[p]&&(n[p]=e.ajaxSettings[p]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host);var r=n.dataType,c=/=\?/.test(n.url);if("jsonp"==r||c)return c||(n.url=h(n.url,"callback=?")),e.ajaxJSONP(n);n.url||(n.url=window.location.toString()),d(n);var f,g=n.accepts[r],v={},$=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,y=e.ajaxSettings.xhr();n.crossDomain||(v["X-Requested-With"]="XMLHttpRequest"),g&&(v.Accept=g,g.indexOf(",")>-1&&(g=g.split(",",2)[0]),y.overrideMimeType&&y.overrideMimeType(g)),(n.contentType||n.data&&"GET"!=n.type.toUpperCase())&&(v["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=e.extend(v,n.headers||{}),y.onreadystatechange=function(){if(4==y.readyState){clearTimeout(f);var e,t=!1;if(y.status>=200&&y.status<300||304==y.status||0==y.status&&"file:"==$){r=r||l(y.getResponseHeader("content-type")),e=y.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=y.responseXML:"json"==r&&(e=T.test(e)?null:JSON.parse(e))}catch(i){t=i}t?s(t,"parsererror",y,n):a(e,y,n)}else s(null,"error",y,n)}};var w="async"in n?n.async:!0;y.open(n.type,n.url,w);for(m in n.headers)y.setRequestHeader(m,n.headers[m]);return o(y,n)===!1?(y.abort(),!1):(n.timeout>0&&(f=setTimeout(function(){y.onreadystatechange=u,y.abort(),s(null,"timeout",y,n)},n.timeout)),y.send(n.data?n.data:null),y)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,i,r){return e.isFunction(n)&&(r=r||i,i=n,n=null),e.ajax({type:"POST",url:t,data:n,success:i,dataType:r})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var i,r=this,o=t.split(/\s/);return o.length>1&&(t=o[0],i=o[1]),e.get(t,function(t){r.html(i?e($.createElement("div")).html(t.replace(y,"")).find(i).html():t),n&&n.call(r)}),this};var C=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(C(e)+"="+C(t))},f(n,e,t),n.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){t=e(this);var i=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(e){return"tagName"in e?e:e.parentNode}function n(e,t,n,i){var r=Math.abs(e-t),o=Math.abs(n-i);return r>=o?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){a=null,s.last&&(s.el.trigger("longTap"),s={})}function r(){a&&clearTimeout(a),a=null}var o,a,s={},c=750;e(document).ready(function(){var u,l;e(document.body).bind("touchstart",function(n){u=Date.now(),l=u-(s.last||u),s.el=e(t(n.touches[0].target)),o&&clearTimeout(o),s.x1=n.touches[0].pageX,s.y1=n.touches[0].pageY,l>0&&250>=l&&(s.isDoubleTap=!0),s.last=u,a=setTimeout(i,c)}).bind("touchmove",function(e){r(),s.x2=e.touches[0].pageX,s.y2=e.touches[0].pageY}).bind("touchend",function(e){r(),s.isDoubleTap?(s.el.trigger("doubleTap"),s={}):s.x2&&Math.abs(s.x1-s.x2)>30||s.y2&&Math.abs(s.y1-s.y2)>30?(s.el.trigger("swipe")&&s.el.trigger("swipe"+n(s.x1,s.x2,s.y1,s.y2)),s={}):"last"in s&&(s.el.trigger("tap"),o=setTimeout(function(){o=null,s.el.trigger("singleTap"),s={}},250))}).bind("touchcancel",function(){o&&clearTimeout(o),a&&clearTimeout(a),a=o=null,s={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,c=0,u=a.length;u>c;c++)s[a[c]]=r(s[a[c]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.needsClick(t))return!1;if(i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,c,u,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=e.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=l.tagName.toLowerCase(),"label"===s){if(t=this.findControl(l)){if(this.focus(l),n)return!1;l=t}}else if(this.needsFocus(l))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return i&&!r&&(c=l.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),window.addEventListener("load",function(){FastClick.attach(document.body)},!1),$(document).ready(function(){function e(){for(var e=$(".itemtitle").children("li").length,t=0,n=1;e>n;n++)t+=parseInt($(".itemtitle").children("li").eq(n).find(".numbershow").text());$("#totalnumber").text(t)}function t(e){e.css({"-webkit-filter":"blur(3px)",filter:"blur(3px)"})}function n(e){e.css({"-webkit-filter":"blur(0)",filter:"blur(0)"})}function i(){$("#pagesix").show(),$("#wx_image").height($("#wx_image").width()),$("#pagesix").addClass("bounceInLeft"),$("#pagesix").height($("#pagesix").height()),history.pushState({page:6},"","#pagesix"),setTimeout(function(){$("#pagesix").removeClass("bounceInLeft")},500)}function r(){$("#mobile").val(""),$("#captchas").val(""),$("#email").val(""),$("#password").val(""),$("#confirmPassword").val(""),$("#countDown").hide(),$("#sendcaptchas").show(),window.clearInterval(m),$("#pagesix").addClass("bounceOutLeft"),setTimeout(function(){$("#pagesix").hide(),$("#pagesix").removeClass("bounceOutLeft")},500)}function o(){$("#pageone").find(".countryimg").attr({style:"filter:grayscale(100%);-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%)"}).removeClass("checked"),$("#pageone").find(".countryname").show();for(var t=$(".itemtitle").children("li").length,i=1;t>i;i++)$("#"+$(".itemtitle").children("li").eq(1).attr("class")).remove(),$(".itemtitle").children("li").eq(1).remove();$("#pageone").find(".countryindex").text(""),
$("#pagefive").hide(),$("#pageone").show(),$("#pagetwo").addClass("bounceOutUp"),$("#pagethree").addClass("bounceOutUp"),$("#pagefour").addClass("bounceOutUp"),setTimeout(function(){$("#pagetwo").removeClass("bounceOutUp"),$("#pagethree").removeClass("bounceOutUp"),$("#pagefour").removeClass("bounceOutUp"),$("#pagetwo").hide(),$("#pagethree").hide(),$("#pagefour").hide(),$(".background").hide(),n($("#pagetwo")),$("#nationalflag").removeAttr("class")},1e3),e()}var a=document.body.height,s=document.body.scrollWidth;$("#pageone").height(a),$("#pageone").find(".pure-u-1-3").height($("#pageone").find(".pure-u-1-3").width()),$("#pagetwo").height(a),$("#pagethree").height(a),$("#pagesix").height(a),$(".pagetitle").height(.09*a),$(".pictureex").width(.2142*s),$(".chosefile").width(.2142*s);var c=0,u=0,l=0,h=0;"#candy"==location.hash&&(h=1),history.replaceState({page:1},"","#pageone"),window.onpopstate=function(n){if("#pageone"==location.hash)document.title="我要买",1==$(".itemtitle").children("li").length?o():($("#pagefive").show(),$("#pagefive").addClass("bounceInDown"),$(".background").show(),t($("#pagetwo")),setTimeout(function(){$("#pagefive").removeClass("bounceInDown")},1e3));else if("#pagetwo"==location.hash)if(document.title="我的需求清单","none"==$(".background").css("display")){$("#pagetwo").show(),$("#pagethree").addClass("bounceOutLeft"),e();for(var i=1;i<$("#pagethree").children(".itemdetail").length;i++){var a=$("#pagethree").children(".itemdetail").eq(i);a.find(".icon-checkmark").parent("div").hasClass("check")||($("."+a.attr("id")).remove(),a.find(".chosefile").removeAttr("id"),a.find(".picturearea").removeAttr("id"),e(),setTimeout(function(){a.remove()},500))}setTimeout(function(){$("#pagethree").children(".itemdetail").hide(),$("#pagethree").hide(),$("#pagethree").removeClass("bounceOutLeft")},500)}else r()},$("#pageone").on("click",".countryname",function(e){e.preventDefault(),e.stopImmediatePropagation();for(var t=0;t<$(this).parent("div").parent("div").find(".countryimg").length;t++)$(this).parent("div").parent("div").find(".countryname").eq(t).show(),$(this).parent("div").parent("div").find(".countryimg").eq(t).attr({style:"filter:grayscale(100%);-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%)"}).removeClass("checked");$(".countryindex").text($(this).find("p").text()),$(this).hide(),$(this).prev("img").attr({style:"filter:none;-webkit-filter:none;-moz-filter:none;-ms-filter:none;-o-filter:none"}).addClass("checked")}),$("#pageone").on("click",".pagetitle",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$("#pageone").on("click",".pagefooter",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$("#pageone").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();for(var t=0;t<$(this).find(".countryimg").length;t++)$(this).find(".countryimg").eq(t).attr({style:"filter:grayscale(100%);-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%)"}).removeClass("checked"),$(this).find(".countryname").show();$(this).find(".countryindex").text("")}),$("#checkmarkouter").on("click",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),1==$("#pageone").find(".checked").length){switch($(".checked").attr("id")){case"HongKong":$(".countrychose").html("香港"),c=1;break;case"Japan":$(".countrychose").html("日本"),c=2;break;case"Korea":$(".countrychose").html("韩国"),c=3;break;case"America":$(".countrychose").html("美国"),c=4;break;case"Australia":$(".countrychose").html("澳大利亚"),c=5;break;case"NewZealand":$(".countrychose").html("新西兰"),c=6;break;case"Germany":$(".countrychose").html("德国"),c=7;break;case"England":$(".countrychose").html("英国"),c=8;break;case"French":$(".countrychose").html("法国"),c=9;break;case"Italy":$(".countrychose").html("意大利"),c=10;break;case"OtherArea":$(".countrychose").html("任意国家"),c=11}history.pushState({page:2},"","#pagetwo"),$("#pagetwo").show(),$("#pagetwo").addClass("bounceInDown"),document.title="我的需求清单",setTimeout(function(){$("#pageone").hide()},800),setTimeout(function(){$("#pagetwo").removeClass("bounceInDown"),u=c},1e3)}}),$("#cancle").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#pagefour").hide(),$("#pagefive").addClass("bounceOutUp"),history.pushState({page:2},"","#pagetwo"),document.title="我的需求清单",setTimeout(function(){$("#pagefive").hide(),$(".background").hide(),n($("#pagetwo")),$("#pagefive").removeClass("bounceOutUp")},600)}),$("#headerfive").on("click","span",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#pagefour").hide(),$("#pagefive").addClass("bounceOutUp"),history.pushState({page:2},"","#pagetwo"),document.title="我的需求清单",setTimeout(function(){$("#pagefive").hide(),$(".background").hide(),n($("#pagetwo")),$("#pagefive").removeClass("bounceOutUp")},600)}),$("#suretochange").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),o()});var d=0;$("#additemouter").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),document.title="添加一件商品",$(this).children("span").removeClass("catchAttention"),$(".guide").hide(),d++,history.pushState({page:3},"","#pagethree"),w(d),setTimeout(function(){$("#pagethree").show(),$("#pagethree").addClass("bounceInLeft"),$("#pagethree").height($("#pagethree").height())},1),setTimeout(function(){$("#pagetwo").hide(),$("#pagethree").removeClass("bounceInLeft"),$(".itemtitle").append($(".itemtitle").children("li").first().clone()),$(".itemtitle").children("li").last().attr({"class":"item"+d,style:"display:block"})},501)}),$("#pagetwo").on("click",".icon-bin",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).hide(),$(this).next("span").show(),$(this).next("span").addClass("bounceIn");var t=this;setTimeout(function(){$(t).show(),$(t).addClass("bounceIn"),$(t).next("span").hide(),$(t).next("span").removeClass("bounceIn")},1500),setTimeout(function(){$(t).removeClass("bounceIn")},2e3)});var f;$("body").on("focus","input,textarea",function(){f=$(this).attr("placeholder"),$(this).attr({placeholder:""})}),$("body").on("blur","input,textarea",function(){$(this).attr({placeholder:f})}),$("#pagetwo").on("click",".delete",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=this;$("#"+$(n).parent("p").parent("div").parent("li").attr("class")).remove(),setTimeout(function(){$(n).parent("p").parent("div").parent("li").addClass("animated bounceOutLeft")},1),setTimeout(function(){$(n).parent("p").parent("div").parent("li").remove(),e()},400)}),$("#pagetwo").on("click",".itemtitle3",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$("#pagetwo").on("click",".addtd",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=parseInt($(this).prev().children(".numbershow").text());n++,$(this).prev().children(".numbershow").text(n),$("#"+$(this).parents("li").attr("class")).find(".numbershow").text(n),e()}),$("#pagetwo").on("click",".minustd",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=parseInt($(this).next().children(".numbershow").text());n>1&&(n--,$(this).next().children(".numbershow").text(n),$("#"+$(this).parents("li").attr("class")).find(".numbershow").text(n),e())}),$("#pagetwo").on("click",".itemtitle2",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$("#pagetwo").on("click","li",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).attr({style:"background-color:#e0e0e0"});var t=this;setTimeout(function(){$(t).attr({style:"background-color:#fff"})},500),$("#"+$(this).attr("class")).show(),$("#"+$(this).attr("class")).find(".picturearea").attr({id:"picturearea"}),$("#"+$(this).attr("class")).find(".chosefile").attr({id:"chosefile"}),history.pushState({page:3},"","#pagethree"),setTimeout(function(){$("#pagethree").show(),$("#pagethree").addClass("bounceInLeft"),$("#pagethree").height($("#pagethree").height())},1),setTimeout(function(){$("#pagetwo").hide(),$("#pagethree").removeClass("bounceInLeft")},501)}),$("#pagetwo").on("click",".submit",function(e){e.preventDefault(),e.stopImmediatePropagation(),0==!parseInt($("#totalnumber").text())&&("任意国家"!=$(".pagefooter1").children("p").find("span").first().text()?$("#finalnumber").children("p").html("您希望从"+$(".pagefooter1").children("p").find("span").first().text()+"代购"+$("#totalnumber").text()+"件商品"):$("#finalnumber").children("p").html("您希望代购"+$("#totalnumber").text()+"件商品"),$(".background").show(),t($("#pagetwo")),$("#pagefour").show(),$("#pagefour").addClass("bounceInDown"),setTimeout(function(){$("#pagefour").removeClass("bounceInDown")},1e3))}),$("#pagefour").on("click",".icon-cross",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#pagefour").addClass("bounceOutUp"),setTimeout(function(){$("#pagefour").removeClass("bounceOutUp"),$("#pagefour").hide(),$(".background").hide(),n($("#pagetwo"))},600)}),$("#pagefour").on("click","#makesure",function(e){e.preventDefault(),e.stopImmediatePropagation(),$("#loading").show(),$.ajax({url:"checkPhone",type:"get",dataType:"json",data:"wx_openId",beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){e.state?y():($("#loading").hide(),i())},error:function(e,t,n){$("#loading").hide(),alert("error:"+t+";  message:"+n)}})}),$("#pagethree").on("change",".newtitle",function(e){for(var t=this,n="",i=0;7>i;i++)i<$(t).val().length&&(n+=$(t).val()[i]);$(t).val().length>7&&(n+="..."),$("."+$(t).parent("div").parent("div").attr("id")).find(".itemtitle1").children("p").text(n)," "==!$(t).val()?$(t).parent("div").prev("div").find(".icon-checkmark").parent("div").addClass("check"):$(t).parent("div").prev("div").find(".icon-checkmark").parent("div").removeClass("check")}),$("#pagethree").on("click",".addtd",function(e){e.preventDefault(),e.stopImmediatePropagation;var t=parseInt($(this).prev().children(".numbershow").text());t++,$(this).prev().children(".numbershow").text(t),$("."+$(this).parents(".itemdetail").attr("id")).find(".numbershow").text(t)}),$("#pagethree").on("click",".minustd",function(e){e.preventDefault(),e.stopImmediatePropagation;var t=parseInt($(this).next().children(".numbershow").text());t>1&&(t--,$(this).next().children(".numbershow").text(t),$("."+$(this).parents(".itemdetail").attr("id")).find(".numbershow").text(t))}),$("#pagethree").on("click",".saveouter",function(t){t.preventDefault(),t.stopImmediatePropagation(),$(this).parents(".itemdetail").find(".newtitle").blur(),$(this).parents(".itemdetail").find(".newtitle").blur();var n=this;if(""==$(n).parents(".itemdetail").find(".newtitle").val())return $(n).parents(".itemdetail").find(".newtitle").css({border:"0.2em solid #fa375f"}),setTimeout(function(){$(n).parents(".itemdetail").find(".newtitle").css({border:"0.2em solid rgba(255,255,255,0)"})},1500),!1;var n=this;$("#pagetwo").show(),$("#pagethree").addClass("bounceOutLeft"),setTimeout(function(){$("#pagethree").removeClass("bounceOutLeft"),$("#pagethree").hide(),$(n).parent("div").parent("div").hide(),$(n).parent("div").parent("div").find(".picturearea").removeAttr("id"),$(n).parent("div").parent("div").find(".chosefile").removeAttr("id"),document.getElementsByClassName("itemtitle")[0].scrollTop=document.getElementsByClassName("itemtitle")[0].offsetHeight},500),e(),history.back()}),$("#pagethree").on("click",".closeouter",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=this;$("."+$(n).parent("div").parent("div").attr("id")).remove(),$("#pagetwo").show(),$("#pagethree").addClass("bounceOutLeft"),setTimeout(function(){$("#pagethree").removeClass("bounceOutLeft"),$("#pagethree").hide(),$(n).parent("div").parent("div").remove()},500),e(),history.back()}),wx.ready(function(){$("#pagethree").on("click",".chosefile",function(t){var n=this;wx.chooseImage({count:9-$(n).parent("div").find(".pictureshow").length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){for(var i=t.localIds,r=$(n).parent("div").find(".pictureshow").length,o=0;o<i.length;o++){var a=$(n).parent("div").prev("div").clone().attr({"class":"pictureshow"});a.find("img").attr({src:i[o]}),$(n).before(a),$(n).parent("div").width(($(n).width()+5)*$(n).parent("div").children("div").length),document.getElementById("picturearea").scrollLeft=document.getElementById("picturearea").offsetWidth/4*($(n).parent("div").children("div").length-4.3),$(n).next("i").hide(),9==$(n).parent("div").find(".pictureshow").length&&$(n).hide()}e(i,r,n)}})});var e=function(t,n,i){var r=t[t.length-1];wx.uploadImage({localId:r,isShowProgressTips:1,success:function(r){t.pop();var o=r.serverId;$(i).parent("div").find(".pictureshow").eq(t.length+n).data("src",o),t.length>0&&e(t,n,i)}})}}),$("#pagethree").on("click",".picturedelete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this;$(t).parent("div").addClass("animated bounceOutLeft"),setTimeout(function(){9==$(t).parents(".picturescroll").children(".pictureshow").length&&$(t).parents(".picturescroll").find(".chosefile").show(),$(t).parent("div").remove(),$(t).parent("div").parent("div").width(($(t).parent("div").width()+5)*$(t).parent("div").parent("div").children("div").length);var e=document.getElementById("chosefile");document.getElementById("picturearea").scrollLeft=e.offsetLeft-.7*s},400)}),$("#pagethree").on("click",".pictureshow",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).find(".picturedelete").attr({style:"display: table"});var t=this;setTimeout(function(){$(t).find(".picturedelete").hide()},1e3)}),$("#pagesix").on("click",".clear",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).prev("inpu").val(""),$(this).prev("input").focus()});var p,m,g=/^[0-9]{11}$/;$("#sendcaptchas").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t={mobile:$("#mobile").val()};if(!g.test(t.mobile))return alert("请输入11位中国大陆手机号码"),!1;var n=this,i=50;$("#loading").show(),$.ajax({url:"authMobile/"+t.mobile,type:"get",dataType:"json",beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){0==e?($("#loading").hide(),alert("手机号码已被注册，请更换号码或联系客服")):$.ajax({url:"getVerifyCode/"+t.mobile,type:"get",dataType:"json",beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CRSF-TOKEN",t):void 0},success:function(e){$("#loading").hide(),e.status?($(n).hide(),l=0,$("#countDown").attr({style:"display:inline-block"}),$("#countDown").text("重发(50s)"),p=t.mobile,$("#loading").hide(),m=setInterval(function(){i-=1,$("#countDown").text("重发("+i+"s)"),0==i&&(window.clearInterval(m),$("#countDown").hide(),$("#sendcaptchas").show())},1e3)):alert("发送失败，稍后请重试")},error:function(e,t,n){$("#loading").hide(),alert("error:"+t+";  message:"+n)}})},error:function(e,t,n){$("#loading").hide(),alert("error:"+t+";  message:"+n)}})});var v=/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;$("#pagesix").on("click","#register",function(e){e.preventDefault(),e.stopImmediatePropagation();var t={mobile:"",email:""};return t.mobile=p,t.email=$("#email").val(),p?v.test(t.email)?""==$("#captchas").val()?(alert("请输入验证码"),!1):void(0==l?($("#loading").show(),$.ajax({url:"verifyCode/"+p+"/"+$("#captchas").val(),type:"get",dataType:"json",beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){e.status?(window.clearInterval(m),l=1,$.ajax({url:"register",type:"post",dataType:"json",data:t,beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){1==e?y():($("#loading").hide(),alert("邮箱已被注册，请更换邮箱"))},error:function(e,t,n){$("#loading").hide(),alert("error:"+t+";  message:"+n)}})):($("#loading").hide(),alert("验证码错误，请重新输入"))},error:function(e){$("#loading").hide(),alert("验证失败，请重试")}})):$.ajax({url:"register",type:"post",dataType:"json",data:t,beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){1==e?y():($("#loading").hide(),alert("邮箱已被注册，请重新填写"))},error:function(e,t,n){$("#loading").hide(),alert("error:"+t+";  message:"+n)}})):(alert("邮箱格式不正确，请重新输入"),!1):(alert("请输入11位中国大陆手机号码并验证"),!1)}),$("#pageseven").on("click",".myOrder",function(e){e.preventDefault(),e.stopImmediatePropagation(),window.location.href="/user/MyOrder"});var y=function(){for(var e=[],t=0;t+1<$("#pagethree").children(".itemdetail").length;t++){var n={order:"",title:"",number:"",pic_urls:[],description:""},i=$("#pagethree").children(".itemdetail").eq(t+1);n.order=t,n.title=i.find(".newtitle").val(),n.number=i.find(".numbershow").text();for(var r=0;r<i.find(".pictureshow").length;r++)n.pic_urls.push(i.find(".pictureshow").eq(r).data("src"));n.description=i.find(".newdescription").val(),e.push(n)}var o=JSON.stringify(e);$.ajax({url:0==h?"":"/buyPal/buyPromotion",type:"post",dataType:"json",data:{items:o,country_id:c},beforeSend:function(e){var t=$("meta[name=csrf-token]").attr("content");return t?e.setRequestHeader("X-CSRF-TOKEN",t):void 0},success:function(e){200==e.status?($("#pageseven").show(),$("#pageseven").addClass("bounceIn"),$("#loading").hide()):301==e.status?window.location.href=e.url:(alert(e.status+"未提交成功，请重试"),$("#loading").hide())},error:function(e,t,n){alert("error:"+t+";  message:"+n),$("#loading").hide()}})},w=function(e){$("#pagethree").append($("#item0").clone()),$("#pagethree").children("div").last().attr({id:"item"+e,style:"display:block"}),$("#pagethree").children("div").last().find(".picturearea").attr({id:"picturearea"}),$("#pagethree").children("div").last().find(".chosefile").attr({id:"chosefile"})};$("#loading").hide()});
//# sourceMappingURL=buy.min.js.map